# looking to make changes? 
# drop me in ~/.config/wlxoverlay/watch.yaml
#

width: 0.150

#size: [400, 272]
size: [500, 325]

elements:
  # background panel
  - type: Panel
    rect: [0, 30, 400, 130]
    corner_radius: 0
    bg_color: "#2e3440"

  - type: Button
    rect: [2, 162, 26, 36]
    corner_radius: 0
    font_size: 15
    bg_color: "#b48ead"
    fg_color: "#2e3440"
    text: "󱮑"
    click_up: # destroy if exists, otherwise create
      - type: Window
        target: settings
        action: ShowUi # only triggers if not exists
      - type: Window 
        target: settings
        action: Destroy # only triggers if exists since before current frame

  #Dashboard toggle button
  - type: Button
    rect: [32, 162, 48, 36]
    corner_radius: 0
    font_size: 15
    bg_color: "#81a1c1"
    fg_color: "#2e3440"
    text: "󰹑"
    click_up:
      - type: WayVR
        action: ToggleDashboard

  # Keyboard button
  - type: Button
    rect: [84, 162, 48, 36]
    corner_radius: 0
    font_size: 15
    fg_color: "#2e3440"
    bg_color: "#a3be8c"
    text: 󰧹
    click_up:
      - type: Overlay
        target: "kbd"
        action: ToggleVisible
    long_click_up:
      - type: Overlay
        target: "kbd"
        action: Reset
    right_up:
      - type: Overlay
        target: "kbd"
        action: ToggleImmovable
    middle_up:
      - type: Overlay
        target: "kbd"
        action: ToggleInteraction
    scroll_up:
      - type: Overlay
        target: "kbd"
        action: 
          Opacity: { delta: 0.025 }
    scroll_down:
      - type: Overlay
        target: "kbd"
        action: 
          Opacity: { delta: -0.025 }

  # bottom row, of keyboard + overlays
  - type: OverlayList
    rect: [134, 160, 266, 40]
    corner_radius: 0
    font_size: 15
    fg_color: "#d8dee9"
    bg_color: "#3b4252"
    layout: Horizontal
    click_up: ToggleVisible
    long_click_up: Reset
    right_up: ToggleImmovable
    middle_up: ToggleInteraction
    scroll_up: 
      Opacity: { delta: 0.025 }
    scroll_down: 
      Opacity: { delta: -0.025 }
  
  # WayVR
  #- type: WayVRLauncher
  #  rect: [0, 200, 400, 36]
  #  corner_radius: 0
  #  font_size: 15
  #  fg_color: "#d8dee9"
  #  bg_color: "#4c566a"
  #  catalog_name: "default_catalog"

  #- type: WayVRDisplayList
  #  rect: [0, 236, 400, 36]
  #  corner_radius: 0
  #  font_size: 15
  #  fg_color: "#d8dee9"
  #  bg_color: "#4c566a"
  # local clock
  - type: Label
    rect: [5, 75, 200, 50]
    corner_radius: 0
    font_size: 19 # Use 32 for 12-hour time
    fg_color: "#d8dee9"
    source: Clock
    #format: "%H:%M:%S" # 23:59:59
    format: "%I:%M %p" # 11:59 PM

    # uptime
  - type: Label
    rect: [5, 95, 400, 60]
    font_size: 12
    fg_color: "#d8dee9"
    source: Timer
    format: "%H:%M:%S" # 23:59

      # Player Status
  - type: Label
    rect: [5, 48, 40, 32]
    font_size: 11
    fg_color: "#d8dee9"
    source: Exec
    command: [ "bash", "-c" ,"playerctl metadata --format '{{playerName}}: {{lc(status)}} '\
'{{duration(position)}} | {{duration(mpris:length)}}'" ]
    interval: 0.5

  # local date
  - type: Label
    rect: [5, 110, 200, 20]
    corner_radius: 0
    font_size: 11
    fg_color: "#d8dee9"
    source: Clock
    format: "%m-%d-%Y"

  # local day-of-week
  - type: Label
    rect: [5, 130, 200, 50]
    corner_radius: 0
    font_size: 11
    fg_color: "#d8dee9"
    source: Clock
    format: "%a" # Tuesday

  # batteries
  - type: BatteryList
    rect: [0, 5, 400, 30]
    corner_radius: 0
    font_size: 16
    fg_color: "#8bd5ca"
    fg_color_low: "#bf616a"
    fg_color_charging: "#ebcb8b"
    num_devices: 9
    layout: Horizontal
    low_threshold: 33

## Volume buttons
  # Vol+
  - type: Button
    rect: [355, 79, 30, 32]
    corner_radius: 4
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#5e81ac"
    text: "󰝝"
    click_down:
      - type: Exec
        command: ["pactl", "set-sink-volume", "@DEFAULT_SINK@", "+5%"]
  # Play/Pause
  - type: Button
    rect: [320, 79, 30, 32]
    corner_radius: 4
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#d08770"
    text: "⏯"
    click_down:
      - type: Exec
        command: ["playerctl", "play-pause"]
  # Previous Song
  - type: Button
    rect: [320, 40, 30, 32]
    corner_radius: 4
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#bf244c"
    text: "⏮"
    click_down:
      - type: Exec
        command: ["playerctl", "previous"]
    # Next Song
  - type: Button
    rect: [355, 40, 30, 32]
    corner_radius: 4
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#bf244c"
    text: "⏭"
    click_down:
      - type: Exec
        command: ["playerctl", "next"]
  # Vol-
  - type: Button
    rect: [355, 116, 30, 32]
    corner_radius: 4
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#5e81ac"
    text: "󰝞"
    click_down:
      - type: Exec
        command: ["pactl", "set-sink-volume", "@DEFAULT_SINK@", "-5%"]

  # restart button
  - type: Button
    rect: [320, 116, 30, 32]
    corner_radius: 0
    font_size: 13
    fg_color: "#2e3440"
    bg_color: "#ebcb8b"
    text: "󰜉"
    click_down:
      - type: Exec
        command: [ "wlx-overlay-s", "--openxr", "--show", "--replace" ]

  # GPU stats
  - type: Label
    rect: [100, 95, 40, 32]
    font_size: 9
    fg_color: "#8fbcbb"
    source: Exec
    command: [ "bash", "-c" ,"echo GPU: $(cat /sys/class/drm/card1/device/gpu_busy_percent)%" ]
    interval: 0.5

  - type: Label
    rect: [100, 110, 40, 32]
    font_size: 9
    fg_color: "#88c0d0"
    source: Exec
    command: [ "bash", "-c", "sensors amdgpu-pci-0300 | grep 'edge' | awk '{ printf $2 }' | sed 's/+/EDGE: /g'" ]
    interval: 0.5

  - type: Label
    rect: [100, 125, 40, 32]
    font_size: 9
    fg_color: "#81a1c1"
    source: Exec
    command: [ "bash", "-c", "sensors amdgpu-pci-0300 | grep 'mem' | awk '{ printf $2 }' | sed 's/+/MEM: /g'" ]
    interval: 0.5

  - type: Label
    rect: [100, 140, 40, 32]
    font_size: 9
    fg_color: "#5e81ac"
    source: Exec
    command: [ "bash", "-c", "sensors amdgpu-pci-0300 | grep 'junction' | awk '{ printf $2 }' | sed 's/+/JUNC: /g'" ]
    interval: 0.5

  - type: Label
    rect: [100, 155, 40, 32]
    font_size: 9
    fg_color: "#ebcb8b"
    source: Exec
    command: [ "bash", "-c", "echo VRAM: $(VRAM=$(bc <<<\"scale=2;$(cat /sys/class/drm/card1/device/mem_info_vram_used)/$(cat /sys/class/drm/card1/device/mem_info_vram_total)*100\"); echo ${VRAM%.*})%" ]
    interval: 0.5

   # CPU stats
  - type: Label
    rect: [200, 95, 40, 32]
    font_size: 9
    fg_color: "#8fbcbb"
    source: Exec
    command: [ "bash", "-c", "echo CPU: $(awk '{u=$2+$4; t=$2+$4+$5; if (NR==1){u1=u; t1=t;} else printf \"%.0f\", ($2+$4-u1) * 100 / (t-t1) \"%\"; }' <(grep 'cpu ' /proc/stat) <(sleep .5;grep 'cpu ' /proc/stat))%" ]
    interval: 0.5

  - type: Label
    rect: [200, 110, 40, 32]
    font_size: 9
    fg_color: "#88c0d0"
    source: Exec
    command: [ "bash", "-c", "sensors k10temp-pci-00c3 | grep 'Tctl' | awk '{ printf $2 }' | sed 's/+/Tctl: /g'" ]
    interval: 0.5

  - type: Label
    rect: [200, 125, 40, 32]
    font_size: 9
    fg_color: "#81a1c1"
    source: Exec
    command: [ "bash", "-c", "sensors k10temp-pci-00c3 | grep 'Tccd1' | awk '{ printf $2 }' | sed 's/+/Tccd1: /g'" ]
    interval: 0.5

  - type: Label
    rect: [200, 140, 40, 32]
    font_size: 9
    fg_color: "#5e81ac"
    source: Exec
    command: [ "bash", "-c", "sensors k10temp-pci-00c3 | grep 'Tccd2' | awk '{ printf $2 }' | sed 's/+/Tccd2: /g'" ]
    interval: 0.5

  # RAM
  - type: Label
    rect: [200, 155, 40, 32]
    font_size: 9
    fg_color: "#d08770"
    source: Exec
    command: [ "bash", "-c", "echo RAM: $(free -m | awk 'NR==2{printf \"%.0f%%\", $3*100/$2 }')" ]
    interval: 0.5

  # distro
  - type: Label
    rect: [370, 27, 40, 32]
    font_size: 24
    fg_color: "#8fbcbb"
    source: Static
    text: 

# 󰕿󰖀󰕽󰕾󰖁󰙦󰙧󰝝󰝞󰝟󰼛󰿊󰍟󰎊󰎌󰎉󰏥󰏤󰏦󰏧󰏨󰐊󰐋󰐌󰐍󰐎󰅖󰅗󰅘󰅙󰅚󰓛󰣨
